# Mini Academic Control System (JAcademico)

Spring Boot app (Web, Security, JPA/Hibernate, Thymeleaf) with PostgreSQL and Docker support to manage students, disciplines, and enrollments.

## Requirements
- Java 17+
- Maven 3.8+
- Docker and Docker Compose (optional, recommended)

## Profiles and credentials
- Dev profile (default): `application.properties` points to local Postgres `jdbc:postgresql://localhost:5432/jacademico`.
- Docker profile: `application-docker.properties` uses the `db` service from compose.
- Seed users (DataInitializer):
  - `admin` / `admin123` (ROLE_ADMIN)
  - `secretaria` / `secret123` (ROLE_SECRETARIA)

## How to run
### Local (dev)
1. Have a Postgres instance with DB `jacademico` and the credentials in `application.properties`.
2. From the project root:
   ```bash
   mvn spring-boot:run
   ```
3. Open `http://localhost:8080`.

### Docker/Compose (recommended)
1. From the project root:
   ```bash
   docker compose up --build
   ```
2. App: `http://localhost:8080`
3. DB exposed on `localhost:55432` (internal 5432) with `postgres/postgres`, DB `jacademico`.
4. Stop: `docker compose down` (or `down -v` to wipe the DB volume).

## Tests
```bash
mvn test
```
- Uses in-memory H2 via `src/test/resources/application-test.properties`.

## Folder structure (main)
- `src/main/java/br/edu/ifce/jacademico/entities` — entities and enums
- `dtos` — form DTOs
- `repositories` — JPA repositories
- `services` — business rules/validation
- `controllers` — web layer (Thymeleaf)
- `security` — security configuration and helpers
- `templates` — Thymeleaf pages
- `static` — assets (CSS)
- `docker-compose.yml` — app + Postgres (host port 55432)
- `Dockerfile` — multi-stage build with Maven 3.9 + Temurin 17

## Business rules and security
- Unique enrollment per student + discipline (constraint + service validation).
+- SECRETARIA cannot delete disciplines.
- `createdBy` filled with the authenticated user.
- Custom login at `/login`; `/` and `/login` are public; `/alunos/**`, `/disciplinas/**`, `/matriculas/**` require ADMIN or SECRETARIA; `/admin/**` requires ADMIN.

## Main endpoints
- `/` — home
- `/alunos/**` — students CRUD
- `/disciplinas/**` — disciplines CRUD
- `/matriculas/**` — enrollments CRUD

## Notes
- Passwords hashed with BCrypt.
- Fat jar generated by `spring-boot-maven-plugin` (used in Dockerfile).
- Recommended commits: Conventional Commits (`feat:`, `fix:`, `docs:`, etc).
